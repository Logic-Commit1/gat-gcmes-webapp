<div class="pdf-container">
  <header>
    <% if @canvass.company.gat? %>
      <%= render 'components/pdf/gat_old_header' %>
    <% end %>
    <% if @canvass.company.gcmes? %>
      <%= render 'components/pdf/gcmes_old_header' %>
    <% end %>
  </header>
  <p class="description"><strong>Product Description:</strong> <%= @canvass.description %></p>
  <p class="quantity-unit"><strong>Quantity:</strong> <%= @canvass.quantity %> <%= @canvass.unit %></p>
  <% @canvass.suppliers.each do |product_info| %>
    <% product_info.each do |description, suppliers| %>
      <table class="canvass-table" border="1" style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th>Supplier Name</th>
            <th>Price</th>
            <th>Brand</th>
            <th>Terms</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody>
          <% suppliers.each do |supplier_info| %>
            <% supplier_info.each do |supplier_name, details| %>
              <tr>
                <td><%= supplier_name %></td>
                <td><%= details[0] %></td>
                <!-- Brand -->
                <td><%= details[1] %></td>
                <!-- Price -->
                <td><%= details[2] %></td>
                <!-- Terms -->
                <td><%= details[3] %></td>
                <!-- Remarks -->
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    <% end %>
  <% end %>
  <table class="signatures-table">
    <thead>
      <tr>
        <th>Requested by</th>
        <th>Approved by</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <% if @canvass.user&.signature&.attached? %>
            <%= image_tag("data:image/jpg;base64,#{Base64.strict_encode64(@canvass.user&.signature&.download)}", class: "signature-image") %>
          <% end %>
          <p><%= @canvass.created_by %></p>
        </td>
        <% if @canvass.approved? %>
          <td>
            <% if @canvass.approver&.signature&.attached? %>
              <%= image_tag("data:image/jpg;base64,#{Base64.strict_encode64(@canvass.approver&.signature&.download)}", class: "signature-image") %>
            <% end %>
            <p><%= @canvass.approver&.full_name %></p>
          </td>
        <% else %>
          <td></td>
        <% end %>
      </tr>
    </tbody>
  </table>
</div>